<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M-PRO | –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    
    <!-- Yandex Maps -->
    <script src="https://api-maps.yandex.ru/2.1/?apikey=52007aca-39bd-4a9c-87ef-4d9b730aeb71&lang=ru_RU"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            height: 100vh;
            overflow: hidden;
            background: #f2f2f7;
        }
        
        .hidden { display: none !important; }
        
        /* Layout */
        .container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }
        
        /* Sidebar */
        .sidebar {
            width: 380px;
            min-width: 380px;
            height: 100vh;
            background: #f2f2f7;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .sidebar-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        /* Logo */
        .logo-container {
            text-align: center;
            padding: 10px 0 20px;
        }
        
        .logo {
            font-size: 2.4rem;
            font-weight: 800;
            background: linear-gradient(135deg, #1f6fb2 0%, #3498db 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* User Card */
        .user-card {
            background: white;
            border-radius: 12px;
            padding: 14px 18px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .user-role {
            font-weight: 700;
            color: #1c1c1e;
        }
        
        .user-name {
            color: #8e8e93;
        }
        
        /* iOS Style Sections */
        .ios-section {
            margin-bottom: 20px;
        }
        
        .ios-section-title {
            font-size: 0.9rem;
            font-weight: 600;
            color: #6e6e73;
            margin-bottom: 8px;
            padding-left: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .ios-group {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        /* Admin Buttons */
        .ios-btn {
            display: flex;
            align-items: center;
            gap: 12px;
            width: 100%;
            padding: 14px 16px;
            background: white;
            border: none;
            border-bottom: 1px solid #e5e5ea;
            font-size: 1rem;
            color: #1c1c1e;
            cursor: pointer;
            text-align: left;
            transition: background 0.2s;
        }
        
        .ios-btn:last-child {
            border-bottom: none;
        }
        
        .ios-btn:hover {
            background: #f2f2f7;
        }
        
        .ios-btn-emoji {
            font-size: 1.3rem;
            width: 28px;
            text-align: center;
        }
        
        /* Filter Sections */
        .filter-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 16px;
            background: #f8f9fa;
            cursor: pointer;
            border-bottom: 1px solid #e5e5ea;
        }
        
        .filter-header-content {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            color: #1c1c1e;
        }
        
        .filter-checkbox {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            color: #8e8e93;
            cursor: pointer;
        }
        
        .filter-checkbox input {
            width: 18px;
            height: 18px;
            accent-color: #007aff;
        }
        
        .filter-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        
        .filter-content.open {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .filter-list {
            padding: 8px 0;
        }
        
        .filter-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            cursor: pointer;
        }
        
        .filter-item:hover {
            background: #f2f2f7;
        }
        
        .filter-item input {
            width: 18px;
            height: 18px;
            accent-color: #007aff;
        }
        
        /* Bottom Menu */
        .bottom-menu {
            background: white;
            border-top: 1px solid #e5e5ea;
            padding: 8px 0 20px;
        }
        
        .menu-tabs {
            display: flex;
            justify-content: space-around;
        }
        
        .menu-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding: 6px 24px;
            background: none;
            border: none;
            cursor: pointer;
            color: #8e8e93;
            transition: color 0.2s;
        }
        
        .menu-tab.active {
            color: #007aff;
        }
        
        .menu-tab svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
        
        .menu-tab-label {
            font-size: 0.7rem;
            font-weight: 500;
        }
        
        .menu-tab.exit {
            color: #ff3b30;
        }
        
        /* Map */
        .map-container {
            flex: 1;
            position: relative;
        }
        
        #map {
            width: 100%;
            height: 100%;
        }
        
        /* Mobile */
        @media (max-width: 768px) {
            .sidebar { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-content">
                <!-- Logo -->
                <div class="logo-container">
                    <div class="logo">m-pro</div>
                </div>
                
                <!-- User -->
                <div class="user-card">
                    <span>üë§</span>
                    <div>
                        <span class="user-role">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:</span>
                        <span class="user-name">Admin</span>
                    </div>
                </div>
                
                <!-- Admin Functions -->
                <div class="ios-section">
                    <div class="ios-section-title">‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</div>
                    <div class="ios-group">
                        <button class="ios-btn" onclick="showHomes()">
                            <span class="ios-btn-emoji">üè†</span>
                            <span>–î–æ–º–∞—à–Ω–∏–µ –∞–¥—Ä–µ—Å–∞</span>
                        </button>
                        <button class="ios-btn" onclick="showInspectorManagement()">
                            <span class="ios-btn-emoji">üß≠</span>
                            <span>–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–∞–º–∏</span>
                        </button>
                        <button class="ios-btn" onclick="showAddObject()">
                            <span class="ios-btn-emoji">üè¢</span>
                            <span>–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç –Ω–∞ –∫–∞—Ä—Ç—É</span>
                        </button>
                        <button class="ios-btn" onclick="showKPI()">
                            <span class="ios-btn-emoji">üìà</span>
                            <span>KPI</span>
                        </button>
                        <button class="ios-btn" onclick="archiveCompleted()">
                            <span class="ios-btn-emoji">üóÑÔ∏è</span>
                            <span>–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ</span>
                        </button>
                    </div>
                </div>
                
                <!-- Lists -->
                <div class="ios-section">
                    <div class="ios-group">
                        <!-- Object Lists -->
                        <div class="filter-header" onclick="toggleFilter('lists')">
                            <div class="filter-header-content">
                                <span>üìã</span>
                                <span>–°–ø–∏—Å–∫–∏ –æ–±—ä–µ–∫—Ç–æ–≤</span>
                            </div>
                            <label class="filter-checkbox" onclick="event.stopPropagation()">
                                <input type="checkbox" id="all-lists">
                                <span>–í—Å–µ</span>
                            </label>
                        </div>
                        <div class="filter-content" id="filter-lists">
                            <div class="filter-list" id="lists-container">
                                <div class="filter-item">
                                    <input type="checkbox" id="list-1">
                                    <label for="list-1">–ó–∞–≥—Ä—É–∑–∫–∞...</label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Inspector Lists -->
                        <div class="filter-header" onclick="toggleFilter('inspectors')">
                            <div class="filter-header-content">
                                <span>üë•</span>
                                <span>–°–ø–∏—Å–∫–∏ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–æ–≤</span>
                            </div>
                            <label class="filter-checkbox" onclick="event.stopPropagation()">
                                <input type="checkbox" id="all-inspectors">
                                <span>–í—Å–µ</span>
                            </label>
                        </div>
                        <div class="filter-content" id="filter-inspectors">
                            <div class="filter-list" id="inspectors-container">
                                <div class="filter-item">
                                    <input type="checkbox" id="insp-1">
                                    <label for="insp-1">–ó–∞–≥—Ä—É–∑–∫–∞...</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bottom Menu -->
            <div class="bottom-menu">
                <div class="menu-tabs">
                    <button class="menu-tab active" onclick="switchTab(this, 'lists')">
                        <svg viewBox="0 0 24 24"><path d="M4 14h4v-4H4v4zm0 5h4v-4H4v4zM4 9h4V5H4v4zm5 5h12v-4H9v4zm0 5h12v-4H9v4zM9 5v4h12V5H9z"/></svg>
                        <span class="menu-tab-label">–°–ø–∏—Å–∫–∏</span>
                    </button>
                    <button class="menu-tab" onclick="switchTab(this, 'objects')">
                        <svg viewBox="0 0 24 24"><path d="M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10z"/></svg>
                        <span class="menu-tab-label">–û–±—ä–µ–∫—Ç—ã</span>
                    </button>
                    <button class="menu-tab" onclick="switchTab(this, 'map')">
                        <svg viewBox="0 0 24 24"><path d="M20.5 3l-5.5 2-6-2-5.5 2v16l5.5-2 6 2 5.5-2V3zm-11 2.18l6 2.04v11.6l-6-2.04V5.18zM5 6.82l3.5-1.27v11.6L5 18.42V6.82zM19 18.42l-3.5 1.27V8.09L19 6.82v11.6z"/></svg>
                        <span class="menu-tab-label">–ö–∞—Ä—Ç–∞</span>
                    </button>
                    <button class="menu-tab exit" onclick="logout()">
                        <svg viewBox="0 0 24 24"><path d="M16 17v-3H9v-4h7V7l5 5-5 5M14 2a2 2 0 012 2v2h-2V4H5v16h9v-2h2v2a2 2 0 01-2 2H5a2 2 0 01-2-2V4a2 2 0 012-2h9z"/></svg>
                        <span class="menu-tab-label">–í—ã—Ö–æ–¥</span>
                    </button>
                </div>
            </div>
        </aside>
        
        <!-- MAP -->
        <div class="map-container">
            <div id="map"></div>
        </div>
    </div>

    <script>
        // Firebase Config
        const firebaseConfig = {
            apiKey: "AIzaSyASjRfL1IuhfI8yxjx3eep7RJyzFO2D62U",
            authDomain: "m-pro-sync.firebaseapp.com",
            databaseURL: "https://m-pro-sync-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "m-pro-sync",
            storageBucket: "m-pro-sync.firebasestorage.app",
            messagingSenderId: "504908226667",
            appId: "1:504908226667:web:ea5dcb9acfd7d6a460912e"
        };
        
        // Init
        let map, objectManager;
        
        document.addEventListener('DOMContentLoaded', () => {
            firebase.initializeApp(firebaseConfig);
            initMap();
        });
        
        function initMap() {
            ymaps.ready(() => {
                map = new ymaps.Map('map', {
                    center: [55.7558, 37.6176],
                    zoom: 10,
                    controls: ['zoomControl', 'typeSelector']
                });
                objectManager = new ymaps.ObjectManager({ clusterize: true });
                map.geoObjects.add(objectManager);
            });
        }
        
        // UI Functions
        function toggleFilter(id) {
            const el = document.getElementById('filter-' + id);
            el.classList.toggle('open');
        }
        
        function switchTab(btn, tab) {
            document.querySelectorAll('.menu-tab').forEach(t => t.classList.remove('active'));
            btn.classList.add('active');
            console.log('Tab:', tab);
        }
        
        // Admin Functions
        function showHomes() { console.log('–î–æ–º–∞—à–Ω–∏–µ –∞–¥—Ä–µ—Å–∞'); }
        function showInspectorManagement() { console.log('–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä–æ–≤'); }
        function showAddObject() { console.log('–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç'); }
        function showKPI() { console.log('KPI'); }
        function archiveCompleted() { console.log('–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å'); }
        
        function logout() {
            if (confirm('–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã?')) location.reload();
        }
    </script>
</body>
</html>
